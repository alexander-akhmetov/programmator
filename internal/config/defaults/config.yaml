# Programmator Configuration
# This file defines the default configuration for programmator.
# Override at:
#   - Global: ~/.config/programmator/config.yaml
#   - Local:  .programmator/config.yaml (project-specific)

# Loop settings
max_iterations: 50 # Maximum loop iterations before forced exit
stagnation_limit: 3 # Exit after N consecutive iterations with no file changes
timeout: 900 # Seconds per Claude invocation

# Executor settings
executor: claude # Which coding agent to use ("claude" or "pi")

# Claude executor settings
claude:
  flags: "" # Additional flags passed to claude command
  config_dir: "" # Custom Claude config directory (empty = default)
  anthropic_api_key: "" # Anthropic API key to pass to Claude (filters inherited ANTHROPIC_API_KEY)

# Pi coding agent settings
pi:
  flags: "" # Additional flags passed to pi command
  config_dir: "" # Custom PI_CODING_AGENT_DIR (empty = default)
  provider: "" # LLM provider (e.g. "anthropic", "openai")
  model: "" # Model name (e.g. "sonnet", "gpt-4o")
  api_key: "" # API key for the configured provider

# Ticket settings
ticket_command: "tk" # Binary name for the ticket CLI (tk or ticket)

# Git workflow settings
git:
  auto_commit: false # Auto-commit after each phase completion
  move_completed_plans: false # Move completed plans to completed/ directory
  completed_plans_dir: "" # Directory for completed plans (default: plans/completed)
  branch_prefix: "" # Prefix for auto-created branches (default: programmator/)

# Review settings
review:
  max_iterations: 3 # Maximum review fix iterations
  parallel: true # Run agents in parallel

  agents:
    - name: bug-shallow
      focus:
        - obvious bugs visible in diff only
    - name: bug-deep
      focus:
        - bugs in introduced code requiring context
        - security
        - resource leaks
        - concurrency
    - name: architect
      focus:
        - architectural fit
        - better approaches
        - coupling
    - name: simplification
      focus:
        - over-engineering
        - unnecessary complexity
    - name: silent-failures
      focus:
        - silent failures
        - swallowed errors
        - inadequate logging
    - name: claudemd
      focus:
        - CLAUDE.md compliance
    - name: type-design
      focus:
        - type/interface design quality
    - name: comments
      focus:
        - comment accuracy and value
    - name: tests-and-linters
      focus:
        - test failures
        - lint errors
        - formatting
