# Programmator Configuration
# This file defines the default configuration for programmator.
# Override at:
#   - Global: ~/.config/programmator/config.yaml
#   - Local:  .programmator/config.yaml (project-specific)

# Loop settings
max_iterations: 50 # Maximum loop iterations before forced exit
stagnation_limit: 3 # Exit after N consecutive iterations with no file changes
timeout: 900 # Seconds per Claude invocation

# TUI settings
hide_tips: false # Hide sidebar tips section

# Executor settings
executor: claude # Which coding agent to use (only "claude" supported for now)

# Claude executor settings
claude:
  flags: "" # Additional flags passed to claude command
  config_dir: "" # Custom Claude config directory (empty = default)
  anthropic_api_key: "" # Anthropic API key to pass to Claude (filters inherited ANTHROPIC_API_KEY)

# Ticket settings
ticket_command: "tk" # Binary name for the ticket CLI (tk or ticket)

# Progress log settings
logs_dir: "" # Directory for progress logs (default: ~/.programmator/logs)

# Git workflow settings
git:
  auto_commit: false # Auto-commit after each phase completion
  move_completed_plans: false # Move completed plans to completed/ directory
  completed_plans_dir: "" # Directory for completed plans (default: plans/completed)
  branch_prefix: "" # Prefix for auto-created branches (default: programmator/)

# Codex review settings (used by the codex review agent)
codex:
  command: "codex"
  model: "gpt-5.2-codex"
  reasoning_effort: "xhigh"
  timeout_ms: 3600000
  sandbox: "read-only"
  error_patterns:
    - "Rate limit"
    - "quota exceeded"

# Review settings
review:
  max_iterations: 3 # Maximum review fix iterations
  parallel: true # Run agents in parallel

  agents:
    - name: error-handling
      focus:
        - error handling
        - resource management
        - concurrency
        - race conditions
    - name: logic
      focus:
        - logic errors
        - edge cases
        - off-by-one
        - incorrect conditionals
        - nil handling
    - name: security
      focus:
        - input validation
        - secrets
        - injection
    - name: implementation
      focus:
        - requirement coverage
        - wiring
        - completeness
    - name: testing
      focus:
        - test coverage
        - fake tests
        - edge cases
    - name: simplification
      focus:
        - over-engineering
        - unnecessary abstractions
    - name: linter
      focus:
        - lint errors
        - formatting
        - static analysis
    - name: claudemd
      focus:
        - CLAUDE.md compliance
        - project conventions
    - name: codex
      focus:
        - bugs
        - security
        - race conditions
        - missing error handling
        - resource leaks
